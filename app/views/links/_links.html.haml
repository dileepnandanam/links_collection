- links.each do |link|
  .link.col-lg-6.col-md-12.col-12.pull-left
    = link_to raw(link.name), link.url.chomp, class: 'name', target: '_blank'
    = link_to URI.parse(link.url.chomp).host, link.url.chomp,  class: 'url pull-left'
    = link_to 'reload', retry_link_path(link), class: 'retry pull-right', remote: true, onClick: '$(this).hide()', method: :put
    - if link.source_url.present?
      .preview
        -if link.url.include? 'xnxx.com'
          = video_tag(link.source_url, name: 'media', controls: '', id: link.id)
        - elsif link.url.include? 'pornhub.com'
          .youtube-container
            %iframe{src: link.source_url, height: 315, width: 560}
            
        - elsif link.url.include? 'youtube.com'
          .youtube-container
            = youtube_embed_code(link.source_url.split('&').first)
    .tags
      - link.tags.to_s.split(' ').select(&:present?).each do |tag|
        = link_to tag, search_links_path(q: tag), class: 'tag pull-left', remote: true
      %input.tag.pull-left{data: {url: tag_link_path(link)}, placeholder: 'enter tag'}
      
- if links.next_page
  .more-links.load-random
    .loader
      Loading
    = link_to 'View more', search_links_path(q: params[:q], page: params[:page].present? ? params[:page].to_i + 1 : 2), remote: true, class: 'view-more'